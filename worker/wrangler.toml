name = "hostel-app-api"
main = "index.js"
compatibility_date = "2024-01-01"

# Secrets werden über `wrangler secret put` gesetzt:
# wrangler secret put SHELLY_AUTH_KEY
# wrangler secret put SHELLY_DEVICE_ID
# wrangler secret put SHELLY_CLOUD_SERVER
# wrangler secret put ADMIN_PASSWORD

[vars]
# Nur non-sensitive defaults hier
SHELLY_CLOUD_SERVER = "https://shelly-237-eu.shelly.cloud"
GOOGLE_MAPS_API_KEY = "AIzaSyD96KZTjSABxmBHZGwmSLZdJI94Za0lHtA"

# KV Namespace für Einstellungen
[[kv_namespaces]]
binding = "SETTINGS"
id = "58c3a9f2bb9448608271ddef91c4752f"

# D1 Database für Energie-Daten & Gäste
[[d1_databases]]
binding = "DB"
database_name = "hostel-app-db"
database_id = "a0c42bc6-ace1-4254-a0ae-9515ac51532a"

# Cron Triggers für Energie-Tracking
[triggers]
crons = [
  "0 * * * *",    # Jede Stunde - aktualisiert heutigen Verbrauch
  "55 22 * * *"   # 22:55 UTC = 23:55 CET - setzt morgen's Start
]
